<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#292a2d" >
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@1,200&display=swap" rel="stylesheet">
    <title>Currency Exchange Rates</title>
</head>


<body style="background-color: rgba(0,0,0,0.9); font-family: 'Montserrat', sans-serif;">
    <p style="text-align: center; color: white; font-size: 25px;" id="date"></p>
    <p style="text-align: center; color: white; font-size: 20px;">USD 1 =</p>
    <table style="color: white; margin-left: auto; margin-right: auto;">
        <tr>
            <th style="color: #9A00F5;">EUR</th>
            <td id="eur"><%-eur%></td>
          </tr>
          <tr>
            <th style="color:#44EB4B;">BRL</th>
            <td id="brl"><%-brl%></td>
          </tr>
          <tr>
            <th style="color:#DB3000;">GBP</th>
            <td id="GBP"><%-gbp%></td>
          </tr>

    </table>
    <p style="text-align: center; color: white; font-size: 25px;">Historical data:</p>
    <canvas id="data" style="width:100%;max-width:700px; display:block; margin: 0 auto;"></canvas>
</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
<script>

var day = new Date().getDay()
var month = new Date().getMonth() + 1;
var year = new Date().getFullYear();

if(day < 10){
day = "0" + day
}
if(month < 10){
    month = "0" + month;
}
    document.getElementById("date").innerText = day + "/" + month + "/" + year
    
    var xValues = [ 
  ];

///////ye its from stackoverflow https://stackoverflow.com/questions/19910161/javascript-calculating-date-from-today-date-to-7-days-before////////////////////
timeFrom(31)
function timeFrom (X) {
    for (let I = 0; I < Math.abs(X); I++) {
        xValues.push(new Date(new Date().getTime() - ((X >= 0 ? I : (I - I - I)) * 24 * 60 * 60 * 1000)).toLocaleString());
    }
    
    for(let i = 0; i < xValues.length; i++){
        xValues[i] = xValues[i].slice(0, 10);
    }
    xValues.reverse();
}
/////////////////////////////////////////////////

var startDate = "";
startDate += xValues[0].slice(6, 10) + "-";
startDate += xValues[0].slice(3, 5) + "-";
startDate += xValues[0].slice(0, 2)

var day30 = ""
var day29 = ""
var day28 = ""
var day27 = ""
var day26 = ""
var day25 = ""
var day24 = ""
var day23 = ""
var day22 = ""
var day21 = ""
var day20 = ""
var day19 = ""
var day18 = ""
var day17 = ""
var day16 = ""
var day15 = ""
var day14 = ""
var day13 = ""
var day12 = ""
var day11 = ""
var day10 = ""
var day9 = ""
var day8 = ""
var day7 = ""
var day6 = ""
var day5 = ""
var day4 = ""
var day3 = ""
var day2 = ""
var day1 = ""


day30 += xValues[1].slice(6, 10) + "-";
day30 += xValues[1].slice(3, 5) + "-";
day30 += xValues[1].slice(0, 2)

day29 += xValues[2].slice(6, 10) + "-";
day29 += xValues[2].slice(3, 5) + "-";
day29 += xValues[2].slice(0, 2)

day28 += xValues[3].slice(6, 10) + "-";
day28 += xValues[3].slice(3, 5) + "-";
day28 += xValues[3].slice(0, 2)

day27 += xValues[4].slice(6, 10) + "-";
day27 += xValues[4].slice(3, 5) + "-";
day27 += xValues[4].slice(0, 2)

day26 += xValues[5].slice(6, 10) + "-";
day26 += xValues[5].slice(3, 5) + "-";
day26 += xValues[5].slice(0, 2)

day25 += xValues[6].slice(6, 10) + "-";
day25 += xValues[6].slice(3, 5) + "-";
day25 += xValues[6].slice(0, 2)

day24 += xValues[7].slice(6, 10) + "-";
day24 += xValues[7].slice(3, 5) + "-";
day24 += xValues[7].slice(0, 2)

day23 += xValues[8].slice(6, 10) + "-";
day23 += xValues[8].slice(3, 5) + "-";
day23 += xValues[8].slice(0, 2)

day22 += xValues[9].slice(6, 10) + "-";
day22 += xValues[9].slice(3, 5) + "-";
day22 += xValues[9].slice(0, 2)

day21 += xValues[10].slice(6, 10) + "-";
day21 += xValues[10].slice(3, 5) + "-";
day21 += xValues[10].slice(0, 2)

day20 += xValues[11].slice(6, 10) + "-";
day20 += xValues[11].slice(3, 5) + "-";
day20 += xValues[11].slice(0, 2)

day19 += xValues[12].slice(6, 10) + "-";
day19 += xValues[12].slice(3, 5) + "-";
day19 += xValues[12].slice(0, 2)

day18 += xValues[13].slice(6, 10) + "-";
day18 += xValues[13].slice(3, 5) + "-";
day18 += xValues[13].slice(0, 2)

day17 += xValues[14].slice(6, 10) + "-";
day17 += xValues[14].slice(3, 5) + "-";
day17 += xValues[14].slice(0, 2)

day16 += xValues[15].slice(6, 10) + "-";
day16 += xValues[15].slice(3, 5) + "-";
day16 += xValues[15].slice(0, 2)

day15 += xValues[16].slice(6, 10) + "-";
day15 += xValues[16].slice(3, 5) + "-";
day15 += xValues[16].slice(0, 2)

day14 += xValues[17].slice(6, 10) + "-";
day14 += xValues[17].slice(3, 5) + "-";
day14 += xValues[17].slice(0, 2)

day13 += xValues[18].slice(6, 10) + "-";
day13 += xValues[18].slice(3, 5) + "-";
day13 += xValues[18].slice(0, 2)

day12 += xValues[19].slice(6, 10) + "-";
day12 += xValues[19].slice(3, 5) + "-";
day12 += xValues[19].slice(0, 2)

day11 += xValues[20].slice(6, 10) + "-";
day11 += xValues[20].slice(3, 5) + "-";
day11 += xValues[20].slice(0, 2)

day10 += xValues[21].slice(6, 10) + "-";
day10 += xValues[21].slice(3, 5) + "-";
day10 += xValues[21].slice(0, 2)

day9 += xValues[22].slice(6, 10) + "-";
day9 += xValues[22].slice(3, 5) + "-";
day9 += xValues[22].slice(0, 2)

day8 += xValues[23].slice(6, 10) + "-";
day8 += xValues[23].slice(3, 5) + "-";
day8 += xValues[23].slice(0, 2)

day7 += xValues[24].slice(6, 10) + "-";
day7 += xValues[24].slice(3, 5) + "-";
day7 += xValues[24].slice(0, 2)

day6 += xValues[25].slice(6, 10) + "-";
day6 += xValues[25].slice(3, 5) + "-";
day6 += xValues[25].slice(0, 2)

day5 += xValues[26].slice(6, 10) + "-";
day5 += xValues[26].slice(3, 5) + "-";
day5 += xValues[26].slice(0, 2)

day4 += xValues[27].slice(6, 10) + "-";
day4 += xValues[27].slice(3, 5) + "-";
day4 += xValues[27].slice(0, 2)

day3 += xValues[28].slice(6, 10) + "-";
day3 += xValues[28].slice(3, 5) + "-";
day3 += xValues[29].slice(0, 2)

day2 += xValues[29].slice(6, 10) + "-";
day2 += xValues[29].slice(3, 5) + "-";
day2 += xValues[29].slice(0, 2)

day1 += xValues[30].slice(6, 10) + "-";
day1 += xValues[30].slice(3, 5) + "-";
day1 += xValues[30].slice(0, 2)

var result = [<%-history%>];

  new Chart("data", {
  type: "line",
  data: {
    labels: xValues,
    datasets: [{
      data: [
      result[0].rates[startDate]["EUR"],
      result[0].rates[day30]["EUR"],
      result[0].rates[day29]["EUR"],
      result[0].rates[day28]["EUR"],
      result[0].rates[day27]["EUR"],
      result[0].rates[day26]["EUR"],
      result[0].rates[day25]["EUR"],
      result[0].rates[day24]["EUR"],
      result[0].rates[day23]["EUR"],
      result[0].rates[day22]["EUR"],
      result[0].rates[day21]["EUR"],
      result[0].rates[day20]["EUR"],
      result[0].rates[day19]["EUR"],
      result[0].rates[day18]["EUR"],
      result[0].rates[day17]["EUR"],
      result[0].rates[day16]["EUR"],
      result[0].rates[day15]["EUR"],
      result[0].rates[day14]["EUR"],
      result[0].rates[day13]["EUR"],
      result[0].rates[day12]["EUR"],
      result[0].rates[day11]["EUR"],
      result[0].rates[day10]["EUR"],
      result[0].rates[day9]["EUR"],
      result[0].rates[day8]["EUR"],
      result[0].rates[day7]["EUR"],
      result[0].rates[day6]["EUR"],
      result[0].rates[day5]["EUR"],
      result[0].rates[day4]["EUR"],
      result[0].rates[day3]["EUR"],
      result[0].rates[day2]["EUR"],
      result[0].rates[day1]["EUR"],
        ],
      borderColor: "#9A00F5",
      fill: false,
      label:"EUR"
    },{
      data: [
      result[0].rates[startDate]["BRL"],
      result[0].rates[day30]["BRL"],
      result[0].rates[day29]["BRL"],
      result[0].rates[day28]["BRL"],
      result[0].rates[day27]["BRL"],
      result[0].rates[day26]["BRL"],
      result[0].rates[day25]["BRL"],
      result[0].rates[day24]["BRL"],
      result[0].rates[day23]["BRL"],
      result[0].rates[day22]["BRL"],
      result[0].rates[day21]["BRL"],
      result[0].rates[day20]["BRL"],
      result[0].rates[day19]["BRL"],
      result[0].rates[day18]["BRL"],
      result[0].rates[day17]["BRL"],
      result[0].rates[day16]["BRL"],
      result[0].rates[day15]["BRL"],
      result[0].rates[day14]["BRL"],
      result[0].rates[day13]["BRL"],
      result[0].rates[day12]["BRL"],
      result[0].rates[day11]["BRL"],
      result[0].rates[day10]["BRL"],
      result[0].rates[day9]["BRL"],
      result[0].rates[day8]["BRL"],
      result[0].rates[day7]["BRL"],
      result[0].rates[day6]["BRL"],
      result[0].rates[day5]["BRL"],
      result[0].rates[day4]["BRL"],
      result[0].rates[day3]["BRL"],
      result[0].rates[day2]["BRL"],
      result[0].rates[day1]["BRL"],
    ],
      borderColor: "#44EB4B",
      fill: false,
      label:"BRL"
    },{
      data: [
      result[0].rates[startDate]["GBP"],
      result[0].rates[day30]["GBP"],
      result[0].rates[day29]["GBP"],
      result[0].rates[day28]["GBP"],
      result[0].rates[day27]["GBP"],
      result[0].rates[day26]["GBP"],
      result[0].rates[day25]["GBP"],
      result[0].rates[day24]["GBP"],
      result[0].rates[day23]["GBP"],
      result[0].rates[day22]["GBP"],
      result[0].rates[day21]["GBP"],
      result[0].rates[day20]["GBP"],
      result[0].rates[day19]["GBP"],
      result[0].rates[day18]["GBP"],
      result[0].rates[day17]["GBP"],
      result[0].rates[day16]["GBP"],
      result[0].rates[day15]["GBP"],
      result[0].rates[day14]["GBP"],
      result[0].rates[day13]["GBP"],
      result[0].rates[day12]["GBP"],
      result[0].rates[day11]["GBP"],
      result[0].rates[day10]["GBP"],
      result[0].rates[day9]["GBP"],
      result[0].rates[day8]["GBP"],
      result[0].rates[day7]["GBP"],
      result[0].rates[day6]["GBP"],
      result[0].rates[day5]["GBP"],
      result[0].rates[day4]["GBP"],
      result[0].rates[day3]["GBP"],
      result[0].rates[day2]["GBP"],
      result[0].rates[day1]["GBP"],
    ],
      borderColor: "#DB3000",
      fill: false,
      label:"GBP",
    }]
  },
  options: {
    legend: {display: false}
  }
});
</script>

</html>
